= Channel Subscriptions And Management


[[_overview]]
== Overview
CSM API's helps to register Webhook registrations for an application/integration and helps in user registrations for a consented user


=== Version information
[%hardbreaks]
_Version_ : 0.1


=== URI scheme
[%hardbreaks]
_Host_ : csm-dev.adobe.io
_Schemes_ : HTTPS


=== Tags

* csm




[[_paths]]
== Paths

[[_addeventsmetadata]]
=== Add an Event Metadata 
....
POST /csm/events/metadata
....


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Body*|*body* +
_optional_||<<_eventsdata,EventsData>>
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|<<_eventsdata,EventsData>>
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_getavailableeventsdata]]
=== Gets all Available Event Types  available for registrations
....
GET /csm/events/metadata
....


==== Description
Gets all Available Event Types available for registrations, This is one of the values passed to webhook registration


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|< <<_eventsdata,EventsData>> > array
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_deleteeventmetadata]]
=== Delete an Event Metadata 
....
DELETE /csm/events/metadata/{publisherCode}/{eventCode}
....


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Path*|*eventCode* +
_required_||string
|*Path*|*publisherCode* +
_required_||string
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*default*|successful operation|No Content
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_createuserregistration]]
=== Creates a user registration
....
POST /csm/users
....


==== Description
Creates a registration for the passed token generated by a clientId


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|<<_userregistration,UserRegistration>>
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_getuserregistration]]
=== Gets all user registrations for the given guid
....
GET /csm/users/{userGuid}
....


==== Description
Gets all user registrations for the given guid


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Path*|*userGuid* +
_required_||string
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|< <<_userregistration,UserRegistration>> > array
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_createregistration]]
=== Creates a WebHook registration
....
POST /csm/webhooks
....


==== Description
Creates a registration of a topic and webhook


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Body*|*body* +
_optional_||<<_registration,Registration>>
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|< <<_registration,Registration>> > array
|===


==== Consumes

* `application/json`


==== Produces

* `application/json`


==== Tags

* csm


[[_getregistrations]]
=== Get all Webhook registration details
....
GET /csm/webhooks/{clientId}
....


==== Description
Get a webhook registration details based on a clientId


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Path*|*clientId* +
_required_||string
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|< <<_registration,Registration>> > array
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_updateregistration]]
=== Updates webhook registration
....
PUT /csm/webhooks/{clientId}
....


==== Description
Updates webhook


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Path*|*clientId* +
_required_||string
|*Body*|*body* +
_optional_||<<_registration,Registration>>
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|<<_registration,Registration>>
|===


==== Consumes

* `application/json`


==== Produces

* `application/json`


==== Tags

* csm


[[_getregistration]]
=== Get a specific WebHook registration details
....
GET /csm/webhooks/{clientId}/{id}
....


==== Description
Get a webhook registration details based on a clientId and webhook id


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Path*|*clientId* +
_required_||string
|*Path*|*id* +
_required_||integer(int64)
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|successful operation|<<_registration,Registration>>
|===


==== Produces

* `application/json`


==== Tags

* csm


[[_deleteregistration]]
=== Deletes webhook registration
....
DELETE /csm/webhooks/{clientId}/{id}
....


==== Description
Deletes webhook


==== Parameters

[options="header", cols=".^2,.^3,.^9,.^4"]
|===
|Type|Name|Description|Schema
|*Header*|*AUTHORIZATION* +
_required_|The auth token in format 'Bearer {token}'|string
|*Header*|*X-API-KEY* +
_required_|The API key whitelisted @ Adobe.io|string
|*Path*|*clientId* +
_required_||string
|*Path*|*id* +
_required_||integer(int64)
|===


==== Responses

[options="header", cols=".^2,.^14,.^4"]
|===
|HTTP Code|Description|Schema
|*200*|Success|No Content
|*400*|Bad request|No Content
|===


==== Consumes

* `application/json`


==== Produces

* `application/json`


==== Tags

* csm




[[_definitions]]
== Definitions

[[_eventsdata]]
=== EventsData

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|*description* +
_optional_|string
|*event_code* +
_optional_|string
|*label* +
_optional_|string
|*provider* +
_optional_|string
|===


[[_registration]]
=== Registration

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|*client_id* +
_required_|*Length* : `3 - 2147483647`|string
|*events_of_interest* +
_optional_||< string > array
|*id* +
_optional_||integer(int64)
|*registration_id* +
_optional_||string
|*status* +
_optional_||enum (ACCEPTED, VERIFIED, VERIFICATION_FAILED, HOOK_UNREACHABLE, DELETED)
|*webhook_url* +
_optional_|*Length* : `6 - 2147483647`|string
|===


[[_userregistration]]
=== UserRegistration

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|*client_id* +
_required_|*Length* : `3 - 255`|string
|*consent_status* +
_optional_||enum (ACCEPTED, REVOKED)
|*id* +
_optional_||integer(int64)
|*scope* +
_optional_||string
|*user_guid* +
_optional_|*Length* : `3 - 300`|string
|===





